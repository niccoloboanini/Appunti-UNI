## TRASFORMATE DI SEQUENZE FONDAMENTALI (parte2)
### SEQUENZA "DISPARI"
Sia $\displaystyle x[n] \longleftrightarrow \overline{X}(F)$
Definiamo
$$
y[n] = (-1)^n x[n]
$$
Ovvero la sequenza di partenza con ribaltamento dei campioni in posizione dispari:
![[Pasted image 20220506131045.png|250]]
 
La **trasformata** è la seguente:
>$$ \overline{Y}(F) = \left[\sum_{n=-\infty}^{\infty} (-1)^{n}\right] e^{-j2\pi Fn} $$
>Osservando che $-1 = e^{j\pi}$ , posso riscrivere $\overline{Y}(F)$ come:
>$$ \overline{Y}(F) = \sum_{n=-\infty}^{\infty} e^{j\pi n}\ x[n] e^{-j2 \pi Fn} = \underbrace{\sum_{n=-\infty}^{\infty} x[n] e^{-j2\pi (F-\frac{1}{2})n}}_{\overline{X}(F-\frac{1}{2})}$$

Possiamo quindi affermare che **moltiplicare per $(-1)^n$ equivale a eseguire una traslazione di $\displaystyle \frac{1}{2}$ in frequenza della $\overline{X}(F)$ di partenza**.
> [!abstract] Esempio
> Per quanto visto in precedenza sappiamo che: $$ a^{n} u[n] \longleftrightarrow \frac{1}{1-a \cdot e^{-j2\pi F}} $$
> Quindi applicando quanto visto: $$ (-1)^n a^{n} u[n] \longleftrightarrow \frac{1}{1-a \cdot e^{-j2\pi (F-\frac{1}{2})}} = \frac{1}{1-a \cdot e^{-j2\pi F} \cdot \underbrace{e^{j2 \pi \frac{1}{2}}}_{-1} } =  \frac{1}{1+a e^{j 2 \pi F}}$$. Graficamente, ricordando che senza il $(-1)^n$ e  per $a = 0.5$ otteniamo: ![[Pasted image 20220506133125.png|350]]
>Si mostra facilmente che introducendo il termine $(-1)^n$ cioè ritardando lo spettro si arriva al seguente risultato:
>	![[Pasted image 20220506133321.png|400]]
>	**Ricordiamoci che è periodico!!**


### FINESTRA RETTANGOLARE (rect)
L'equivalente tempo discreto di un rettangolo è una **finestra rettangolare** ed è così rappresentabile:
![[Pasted image 20220507143712.png|500]]
> Matematicamente: $x[n] = u[n] - u[n-N]$, ovvero $$ \boxed{x[n]=\begin{cases}
\ 1 & 0 \leq n \leq N-1  \\
\ 0 & \text{altrove} \end{cases}} $$

> [!hint] Trasformata $\overline X{(F)}$
$$\overline{X}(F)=\sum_{n=0}^{N-1} 1 \cdot e^{-j2\pi Fn} = \sum_{n=0}^{N-1} ( \underbrace{e^{-j2\pi F}}_{q} )^{n} = \sum_{n=0}^{N-1} q^n$$
> 
Siamo arrivati a una serie **geometrica troncata**, di ragione $q$: 
>>il fatto che sia *troncata* ci garantisce che la serie **converge** (infatti è una sommatoria di un numero *finito* di termini)
>>
>> Il risultato è noto dall'analisi matematica ed è il seguente (valido $\forall q$): $$\boxed{\sum_{n=0}^{N-1} q^{n} = \frac{1-q^n}{1-q} }$$
Applicando questo risultato con $q = e^{-j2\pi Fn}$, otteniamo:$$\overline{X}(F)= \frac{1-e^{-j2\pi Fn}}{1-e^{-j2\pi Fn}}
\underbrace{=}_{\substack{\text{raccolgo} \\ \text{meta' fase}}} \frac{e^{-j\pi Fn} (e^{j\pi Fn} - e^{-j2\pi Fn}) } {e^{-j\pi F} (e^{j\pi F}-e^{-j\pi F} )}$$
Da cui ci si riconduce alla formula di Eulero del seno moltiplicando sopra e sotto per $2j$:
$$\overline{X}(F)=[\dots]= e^{-j2\pi F(\frac{N-1}{2})} \cdot \frac{\sin(\pi Fn) }{sin(\pi F)}$$ Dove è stato fatto comparire $\frac{N-1}{2}$ che è il *centro di simmetria di un rettangolo*
**Riassumendo**:
$$\boxed{u[n] - u[n-N] \quad \longleftrightarrow \quad e^{-j2\pi F(\frac{N-1}{2})} \cdot \frac{\sin(\pi Fn) }{\sin(\pi F)}}$$
Graficamente:
Lo spettro di *ampiezza* è simile a un sinc ("**similsinc**"), ma la principale differenza è che è **periodico**:
 ![[Pasted image 20220507151503.png|500]]
 Lo spettro di *fase* invece è una **retta** con pendenza $2\pi \cdot \frac{N-1}{2}$ (più campioni di prende, più la retta ha pendenza maggiore). Anch'essa è evidentemente **periodica**:
 ![[Pasted image 20220507151638.png|500]]

### SEGNO
 Sia: 
 $$
 x[n] = sgn[n] = \begin{cases}
1 & n>0 \\
0 & n=0 \\
-1 & n<1
\end{cases}
$$
![[Pasted image 20220507184706.png|400]]

Definiamo:
$$
y[n] = \overbrace{\Delta x[n]= x[n]-x[n-1]}^{\diamondsuit}= \begin{cases}
0 & n<0 \\
0 & n\geq 2 \\
1 & n = 0 \\
1 & n=1
\end{cases} \qquad \underbrace{=}_{\text{dal grafico}} \overbrace{\delta[n] + \delta[n-1]}^{\clubsuit}
$$
![[Pasted image 20220507185252.png]]

- Abbiamo due impulsi discreti unitari (uno centrato in $0$ e uno centrato in $1$).

Eseguendo la **trasformata** di entrambe le notazioni sopra descritte si ottiene:
$$
\diamondsuit \longleftrightarrow \overline{Y}(F)= \overline{X}(F)(1-e^{-j2\pi F})
$$
$$
\spadesuit \longleftrightarrow \overline{Y}(F) = 1 + e^{-j2\pi F}
$$
Deve valere quindi la relazione:
$$
 \boxed{\overline{X}(F)(1-e^{-j2\pi F}) = 1 + e^{-j2\pi F}}
$$
Pertanto,
$$
\mathscr{F}\{sgn(n)\} = \overline{X}(F)= \frac{1+e^{-j2\pi F}}{1-e^{-j2\pi F}}
$$
Ovvero:
$$
\boxed{\boxed{sgn[n] \longleftrightarrow \frac{1+e^{-j2\pi F}}{1-e^{-j2\pi F}}}}
$$

### GRADINO
Dalla trasformata della sequenza segno appena dimostrata, si passa facilmente a trovare la trasformata del **gradino**, infatti sappiamo che:
$$
u[n] = \frac{1}{2} sgn[n] + \frac{1}{2} + \frac{1}{2}\delta[n]
$$
- ovvero si ottiene moltiplicando la sequenza segno per $\frac{1}{2}$ e si aggiunge quindi un termine di ritardo $1/2$ per ottenere il gradino **unitario**. Infine sommiamo ancora $\frac{1}{2} \delta[n]$ per "correggere" come vogliamo il termine in $0$.
> [!tip] Trasformata del gradino
> $$\mathscr{F}\{u[n]\} = \frac{1}{2}\mathscr{F}\{sgn[n]\} + \frac{1}{2}\delta(F) + \frac{1}{2}$$
> Dove per **linearità** è stata fatta la trasformata dei termini "facili" da vedere.
> Dalla relazione precedente conosciamo anche la trasformata della sequenza segno. Si può quindi concludere e riassumere in questo modo (facendo un po' di raccoglimenti e semplificazioni):
> $$\boxed{u[n] \longleftrightarrow \frac{1}{1-e^{-j2\pi F}} + \frac{1}{2}\delta(F)}$$
> **Nota bene:** la trasformata include anche una funzione generalizzata $(\delta(F))$, come ci si aspettava dato che la funzione gradino "non va a zero".






## INTERPOLAZIONE A MANTENIMENTO
Precedentemente abbiamo visto l'*interpolazione cardinale* come primo modo di **ricostruire il segnale** a partire dai campioni. Esso era denominato $x_c(t)$ *però* presentava due problemi principali nell'utilizzo pratico, ovvero l'utilizzo della $\delta$ e del filtro $H_{LP}$ ideale (cfr. Appunti vecchi e schema riassuntivo Lezione 5 maggio 1h e 11m circa). 

Nell'utilizzo pratico si sceglie perciò un modo alternativo: **l'interpolazione a mantenimento**.
- La sequenza di partenza viene "unita", utilizzando delle funzioni *costanti a tratti*, viene cioè mantenuto il campione per tutta la durata del passo di campionamento
	- Si effettua in questo modo un **passaggio dal mondo discreto (digitale) al mondo continuo (analogico)**
	- Graficamente si formano tanti rettangoli attaccati tra loro (di altezza diversa a seconda del campione)
![[Pasted image 20220508193312.png|400]]

Potenzialmente, il segnale ricostruito potrebbe essere diverso da quello analogico di origine, che magari era fatto così:
		![[Pasted image 20220508193416.png]]

- Passare dalla forma d'onda *costante a tratti* a quella *di partenza* è però in qualche modo possibile, ma è necessario definire un **modello** (matematico) della forma d'onda costante a tratti.
Introduciamo quindi la **funzione rettangolare  $\textcolor{red} {p(t)}$** che descrive il mantenimento (costante) della funzione da un campione fino al successivo:
![[Pasted image 20220508194146.png]]
Ovvero:
$$
p(t) = rect(\frac{t-T/2}{T})
$$

Possiamo quindi definire il segnale continuo ricostruito "a rettangoli" reiterando $p(t)$ per tutta la durata del segnale. Si ottiene quindi:
$$
\boxed{\hat{x}(t) = \sum_{n=-\infty}^{\infty} x[n] \cdot p(t-nt)}
$$
> [!quote] Nota
> Il segnale $x_c(t)$ era così definito:
> $$ x_{c(t)} = \sum_{n=-\infty}^{\infty} x[n] \cdot \underbrace{\delta(t-nt)} $$
> Questa espressione risulta simile a quella trovata adesso ($\hat{x}(t)$), con la differenza che in una si usa l'impulso della $\delta$ e nell'altra invece si costruisce un rettangolo.
> Quello che cambia è lo spettro, come vediamo adesso...

> [!tip] Trasformata di $\hat{x}(t)$
> Calcoliamo:
$$\hat{X}(F) \underbrace{=}_{\substack{\text{tempo} \\ \text{continuo}}} \mathscr{F}\{\sum_{n=-\infty}^{\infty} x[n] \cdot p(t-nt)\} = \sum_{n=-\infty}^{\infty} x[n] \mathscr{F}\{p(t-nt)\} \underbrace{=}_{\text{teo ritardo}} \sum_{n=-\infty}^{\infty} x[n] \underbrace{P(f)}_{\mathscr{F}\{p(t)\}}\cdot e^{-j2\pi FT}$$
Da cui:
$$ \hat X(f)= P(f) \cdot \underbrace{\sum_{n=-\infty}^{\infty} x[n] e^{-j2\pi fnT}}_{\overline{X}(F)} $$
Abbiamo quindi ottenuto una trasformata *simile* a quella vista utilizzando la $\delta$ (ovvero $\overline{X}(F)$)... **La differenza sostanziale nell'aver utilizzato il rettangolo sta nella comparsa del fattore $P(f)$** a moltiplicare.  Riassumendo: $$ \boxed{\boxed{ \hat{x}(t) = \sum_{n=-\infty}^{\infty} x[n] \cdot p(t-nt) \longleftrightarrow P(f) \cdot \sum_{n=-\infty}^{\infty} x[n] e^{-j2\pi fnT} = \hat X(f)}} $$


> [!hint] Trasformata di $p(t)$
> Essendo $p(t)$ segnale rettangolare traslato, ovvero: $\displaystyle p(t) = rect(\frac{t-T/2}{T})$ , possiamo calcolare facilmente la sua trasformata:
> $$ P(f) = T \cdot sinc(ft) \cdot e^{-j2\pi F\frac{t}{2}}$$
> Riassumendo: $$\boxed{rect\left(\frac{t-T/2}{T}\right) \longleftrightarrow T \cdot sinc(ft) \cdot e^{-j2\pi F\frac{t}{2}}}$$
 
Dall'ultimo risultato ottenuto, si arriva a dire che:
$$
\begin{align*}
\hat{X}(f) &= \underbrace{\overline{X}(F)} \cdot T \cdot sinc (ft) e^{-j \pi FT} \\
&= \frac{1}{\cancel{T}} \cdot \sum_{k=-\infty}^{\infty} X(f- \frac{k}{T}) \cdot \cancel{T}\cdot sinc (fT) \cdot e^{-j\pi FT}\\
&= \sum_{k=-\infty}^{\infty} X(f- \frac{k}{T}) \cdot sinc(fT) \cdot e^{-j2\pi FT} 
\end{align*}
$$
Questa relazione ci permetterà di modellare il segnale interpolato con mantenimento rispetto al caso ideale.


> [!example] Esempio
> Prendiamo il seguente segnale a banda limitata:
> ![[Pasted image 20220509093033.png|300]]
>Tale che il suo spettro sia: $$\overline{X}(F)= \frac{|f|}{B} \cdot \frac{1}{2B}\cdot rect(\frac{f}{2B})$$ 
>Andiamo a utilizzare una **frequenza di campionamento superiore rispetto a quella di Nyquist**, in particolare **maggiore del doppio della banda $B$** così da evitare il problema dell'utilizzare un filtro ideale per la ricostruzione. Scegliamo quindi per esempio $$f_{c}=2.5 \ B $$
>La formula che dobbiamo utilizzare è la seguente: $$\hat{X}(f)=\textcolor{red}{\sum_{k=-\infty}^{\infty} X(f- \frac{k}{T})} \cdot \textcolor{green}{sinc(fT)} \cdot e^{-j2\pi FT}$$
>Utilizzando solo la prima parte della formula otterremmo il seguente andamento periodico (ovvero ciò che si ottiene utilizzando le $\delta$):
![[Pasted image 20220509094424.png|500]]
Dobbiamo moltiplicare tutto ciò per la funzione $sinc$ (in verde):![[Pasted image 20220509094802.png|500]] Eseguendo questo prodotto otteniamo il segnale ricostruito con interpolazione a mantenimento: 
![[Pasted image 20220509095022.png|500]] 
Come si nota, si sono formate delle **repliche immagini** costituite da triangoli sempre più piccoli, ma pur sempre presenti. Per eliminarle, è sufficiente utilizzare un filtro passa basso (reale perché abbiamo $f_{c}\geq 2B$) in questo modo (parte nera): ![[Pasted image 20220509095354.png|500]] 
Inoltre, il segnale appare "**smussato**" a causa della funzione $sinc$. Per risolvere il problema esistono principalmente due modi: **1)** si utilizza un *filtro analogico* che oltre a rimuovere le repliche immagini, ha un guadagno apposito (che somiglia all'inverso della funzione $sinc$ nell'intervallo desiderato, detto *shaping su banda passante*); **2)** Si *altera lo spettro del segnale campionato in modo digitale* (filtraggio digitale invece che analogico) ![[Pasted image 20220509100040.png|400]]








